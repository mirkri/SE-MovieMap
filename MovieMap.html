<!doctype html>
<!-- The DOCTYPE declaration above will set the     -->
<!-- browser's rendering engine into                -->
<!-- "Standards Mode". Replacing this declaration   -->
<!-- with a "Quirks Mode" doctype is not supported. -->

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <!--                                                               -->
    <!-- Consider inlining CSS to reduce the number of requested files -->
    <!--                                                               -->
    <link type="text/css" rel="stylesheet" href="MovieMap.css">
    <link media="all" type="text/css" href="jquery-ui.css" rel="stylesheet"> 
    <script src="jquery-1.4.4.min.js" type="text/javascript" charset="utf-8"></script> 
    <script src="jquery-ui.min.js" type="text/javascript" charset="utf-8"></script>
    
    <script src="jquery.plugin.html2canvas.js"></script>
	<script src="base64.js"></script>    
	<script src="html2canvas.js"></script>
	<script src="canvas2image.js"></script>
    <script src="exportCSV.js" type="text/javascript" charset="utf-8"></script>
    <script src="exportPNG.js" type="text/javascript" charset="utf-8"></script>
    

    <!--                                           -->
    <!-- Any title is fine                         -->
    <!--                                           -->
    <title>MovieMap</title>
    
    <!--                                           -->
    <!-- This script loads your compiled module.   -->
    <!-- If you add any GWT meta tags, they must   -->
    <!-- be added before this line.                -->
    <!--                                           -->
    <script type="text/javascript" language="javascript" src="moviemap/moviemap.nocache.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
    
    // Variables available from MovieMap.java
    // 
    // countries[] , Array[String] 
    // Holds all country-names that should be included in the GeoChart
    //
    // moviesPerCountry[] , Array[Int]
    // Holds the number of movies for the country with the same Array-Index
    //
    
    function onGwtReady() {
    	
		var items = [['Country', 'Movies']];
		
		//alert(countries);
		
		// If one array is shorter than the other, the function  
		// would iterate over the shorter one to avoid an exception
		
    	var arrayLength = 0;
    	if (countries.length <= moviesPerCountry.length) {
	    	arrayLength = countries.length;
    	} else {
	    	arrayLength = moviesPerCountry.length;
    	}
    	
    	// Fills the GeoChart-table
    	for (i = 0; i < arrayLength; i++) {
		  	items.push([countries[i],moviesPerCountry[i]]);
    	}
		
    	var data = google.visualization.arrayToDataTable(items);
    	
    	var options = {};
		
    	var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
		
    	chart.draw(data, options);
    };
    
    google.load("visualization", "1", {packages:["geochart"]});
	google.setOnLoadCallback(onGwtReady); 	  
      
    </script>
    
  </head>

  <!--                                           -->
  <!-- The body can have arbitrary html, or      -->
  <!-- you can leave the body empty if you want  -->
  <!-- to create a completely dynamic UI.        -->
  <!--                                           -->
  <body>

    <!-- OPTIONAL: include this if you want history support -->
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>
    
    <!-- RECOMMENDED if your web app will not function without JavaScript enabled -->
    <noscript>
      <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
      </div>
    </noscript>

    
	<div style="float:left;"><h1>MovieMap</h1></div>
	<img style="float:right; width: 400px; height: 200px;" src="/banner.gif" />
	<a href="/upload">Click here to update the database</a>

	<div>
        <button id= "Showtable-button"   style="float:left" class="Showtable-button" >
            Show Table</button>
        <button id= "Showmap-button" style="float:left"   class="Showmap-button" >
            Show Map</button>       
	</div>
	
	<script>
  	$(".Showtable-button").click(function () {
    $("div.Table").show("slow");
    $("div.exportCsv").show("slow");
    $("div.Map").hide("slow");
    $("div.exportPng").hide("slow");
    });

	$(".Showmap-button").click(function () {
    $("div.Map").show("slow");
    $("div.exportPng").show("slow");
    $("div.Table").hide("slow");
    $("div.exportCsv").hide("slow");
    });
	</script>

	<div id="rootDropdown" style="float: left" class="Dropdown"></div>
	<div id="rootNavigation" style="float: left" class="Navigation"></div>
	<div style="display: initial" class="exportCsv"><a href="#" id="export" role='button'>Export to CSV</a></div>
    <div style="display: none" class="exportPng"><input onclick="captureDiv();" type="submit" value="Export Map to PNG"/></div>
	<div id="root123" style="float: left;display: initial" class="Table"></div>
	<div id="regions_div" style="display: none; width: 1350px; height: 750px;" class="Map"></div>	
	</div>
	
    <div class="cc"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Lizenzvertrag" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />
    <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Dataset" property="dct:title" rel="dct:type">MovieMap</span> von <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Urheber</span> ist lizenziert unter einer <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Namensnennung - Weitergabe unter gleichen Bedingungen 4.0 International Lizenz</a>.</div> 
    
  </body>
</html>
